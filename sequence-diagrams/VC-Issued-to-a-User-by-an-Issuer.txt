title VC Issued to a User by an Issuer

Actor User
Participant DAA
Participant Cloud Agent
Participant Issuer
Participant VC Store

User <<->> Issuer: Authenticate
User <<->> Issuer: Request issue VC [DA or DAS_USER_ID]
Note over Issuer, User, DAA
Ask subject to give consent for issuing a VC
end note

Issuer -> +Cloud Agent: Aries-RFC-0036-2: Credential offer
opt
Cloud Agent -> DAA: Show user what is being offered
DAA <-> User: FIDO Authentication
DAA -> Cloud Agent: Agree to details
end

Cloud Agent -->> -Issuer: Aries-RFC-0036-3: Credential request (nonce included)

Issuer ->> +Cloud Agent: ADIA-CR-001: Request to Sign VC\n [Sign with ISSUER_ID_SK]
Cloud Agent -> Cloud Agent: Sign VC \n[DAS_USER_ID_SK]
Cloud Agent ->> -Issuer: ADIA-CR-002:Send Signed VC
Issuer->VC Store: Save VC
VC Store --> Issuer: Save VC Success

Issuer -->> +Cloud Agent : ADIA-CR-003: Save VC metadata \n[DAS_USER_ID, CREDENTIAL_ID, \nCREDENTIAL_SCHEMA_ID, ISSUER_ID]
Cloud Agent -> Cloud Agent : Store VC metadata
Cloud Agent -->> -Issuer: ADIA-CR-003:VC metadata save success
Cloud Agent->>DAA: Notify User of VC issuance
