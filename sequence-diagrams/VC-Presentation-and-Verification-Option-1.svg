<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1728" height="829" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[
Title: VC Present and Verification
Participant DAA
Participant USER
participant SP
Participant DAP Cloud Agent
Participant Key Vault
Participant Issuer
Participant VC Storage



USER -> SP: I want to get service (show DA)
SP -> DAP Cloud Agent: Invite SP for DIDcomm conn
DAP Cloud Agent -> SP: DIDcomm connection estabilshed
SP -> DAP Cloud Agent: request VP for the DA (proof offer)
SP -> USER: show QR
DAA -> SP: scan QR
DAA -> DAP Cloud Agent: FIDO Auth
DAP Cloud Agent -> DAP Cloud Agent: find DAP_USER_ID\nfind VC metadata

DAP Cloud Agent -> Issuer: request VC for DAP_USER_ID
VC Storage -> Issuer : retrieve VC for DAP_USER_ID
Issuer  -> DAP Cloud Agent: return VC

DAP Cloud Agent -> Key Vault: request VP
Key Vault -> Key Vault: generate VP signed by DAP_USER_ID_SK

Key Vault -> DAP Cloud Agent: return VP
DAP Cloud Agent -> SP: Send VP and DAP_USER_ID_PK
SP -> SP: Verify VP
SP -> USER: get service]]></source><desc>VC Present and Verification</desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"><rect x="10" y="10" width="269.25" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="15" y="29.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="15">VC Present and Verification</tspan></text></g><g class="actor"><rect x="10" y="48" width="48.8125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="20" y="72.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">DAA</tspan></text></g><g class="actor"><rect x="10" y="771.203125" width="48.8125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="20" y="795.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">DAA</tspan></text></g><line x1="34.40625" x2="34.40625" y1="86" y2="771.203125" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><g class="actor"><rect x="78.8125" y="48" width="58.40625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="88.8125" y="72.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="88.8125">USER</tspan></text></g><g class="actor"><rect x="78.8125" y="771.203125" width="58.40625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="88.8125" y="795.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="88.8125">USER</tspan></text></g><line x1="108.015625" x2="108.015625" y1="86" y2="771.203125" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><g class="actor"><rect x="406.0703125" y="48" width="39.203125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="416.0703125" y="72.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="416.0703125">SP</tspan></text></g><g class="actor"><rect x="406.0703125" y="771.203125" width="39.203125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="416.0703125" y="795.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="416.0703125">SP</tspan></text></g><line x1="425.671875" x2="425.671875" y1="86" y2="771.203125" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><g class="actor"><rect x="699.71875" y="48" width="164.03125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="709.71875" y="72.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="709.71875">DAP Cloud Agent</tspan></text></g><g class="actor"><rect x="699.71875" y="771.203125" width="164.03125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="709.71875" y="795.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="709.71875">DAP Cloud Agent</tspan></text></g><line x1="781.734375" x2="781.734375" y1="86" y2="771.203125" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><g class="actor"><rect x="922.1484375" y="48" width="106.421875" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="932.1484375" y="72.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="932.1484375">Key Vault</tspan></text></g><g class="actor"><rect x="922.1484375" y="771.203125" width="106.421875" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="932.1484375" y="795.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="932.1484375">Key Vault</tspan></text></g><line x1="975.359375" x2="975.359375" y1="86" y2="771.203125" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><g class="actor"><rect x="1322.2109375" y="48" width="77.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="1332.2109375" y="72.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1332.2109375">Issuer</tspan></text></g><g class="actor"><rect x="1322.2109375" y="771.203125" width="77.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="1332.2109375" y="795.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1332.2109375">Issuer</tspan></text></g><line x1="1361.015625" x2="1361.015625" y1="86" y2="771.203125" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><g class="actor"><rect x="1582.2578125" y="48" width="116.015625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="1592.2578125" y="72.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1592.2578125">VC Storage</tspan></text></g><g class="actor"><rect x="1582.2578125" y="771.203125" width="116.015625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2px;"></rect><text x="1592.2578125" y="795.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1592.2578125">VC Storage</tspan></text></g><line x1="1640.265625" x2="1640.265625" y1="86" y2="771.203125" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><g class="signal"><text x="118.015625" y="116.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="118.015625">I want to get service (show DA)</tspan></text><line x1="108.015625" x2="425.671875" y1="124" y2="124" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="478.8828125" y="154.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="478.8828125">Invite SP for DIDcomm conn</tspan></text><line x1="425.671875" x2="781.734375" y1="162" y2="162" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="459.6796875" y="192.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="459.6796875">DIDcomm connection estabilshed</tspan></text><line x1="781.734375" x2="425.671875" y1="200" y2="200" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="435.671875" y="230.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="435.671875">request VP for the DA (proof offer)</tspan></text><line x1="425.671875" x2="781.734375" y1="238" y2="238" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="233.234375" y="268.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="233.234375">show QR</tspan></text><line x1="425.671875" x2="108.015625" y1="276" y2="276" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="196.4296875" y="306.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="196.4296875">scan QR</tspan></text><line x1="34.40625" x2="425.671875" y1="314" y2="314" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="364.859375" y="344.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="364.859375">FIDO Auth</tspan></text><line x1="34.40625" x2="781.734375" y1="352" y2="352" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="806.734375" y="395.6015625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="806.734375">find DAP_USER_ID</tspan><tspan dy="1.2em" x="806.734375">find VC metadata</tspan></text><line x1="781.734375" x2="801.734375" y1="372" y2="372" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><line x1="801.734375" x2="801.734375" y1="372" y2="414.203125" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><line x1="801.734375" x2="781.734375" y1="414.203125" y2="414.203125" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="946.5546875" y="439.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="946.5546875">request VC for DAP_USER_ID</tspan></text><line x1="781.734375" x2="1361.015625" y1="447.203125" y2="447.203125" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="1371.015625" y="477.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1371.015625">retrieve VC for DAP_USER_ID</tspan></text><line x1="1640.265625" x2="1361.015625" y1="485.203125" y2="485.203125" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="1028.1640625" y="515.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1028.1640625">return VC</tspan></text><line x1="1361.015625" x2="781.734375" y1="523.203125" y2="523.203125" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="830.5390625" y="553.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="830.5390625">request VP</tspan></text><line x1="781.734375" x2="975.359375" y1="561.203125" y2="561.203125" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="1000.359375" y="595.203125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1000.359375">generate VP signed by DAP_USER_ID_SK</tspan></text><line x1="975.359375" x2="995.359375" y1="581.203125" y2="581.203125" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><line x1="995.359375" x2="995.359375" y1="581.203125" y2="604.203125" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><line x1="995.359375" x2="975.359375" y1="604.203125" y2="604.203125" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="835.3359375" y="629.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="835.3359375">return VP</tspan></text><line x1="975.359375" x2="781.734375" y1="637.203125" y2="637.203125" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="478.8828125" y="667.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="478.8828125">Send VP and DAP_USER_ID_PK</tspan></text><line x1="781.734375" x2="425.671875" y1="675.203125" y2="675.203125" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="450.671875" y="709.203125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="450.671875">Verify VP</tspan></text><line x1="425.671875" x2="445.671875" y1="695.203125" y2="695.203125" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><line x1="445.671875" x2="445.671875" y1="695.203125" y2="718.203125" stroke="#000000" fill="none" style="stroke-width: 2px;"></line><line x1="445.671875" x2="425.671875" y1="718.203125" y2="718.203125" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="214.03125" y="743.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="214.03125">get service</tspan></text><line x1="425.671875" x2="108.015625" y1="751.203125" y2="751.203125" stroke="#000000" fill="none" style="stroke-width: 2px; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g></svg>