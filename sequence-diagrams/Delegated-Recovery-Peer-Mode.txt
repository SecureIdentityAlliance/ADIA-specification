title: Delegated Recovery-Peer Mode
Participant User
participant User DAA
participant User HomeDAP
Participant Delegated User
participant Delegatee DAA
participant Delegatee HomeDAP
Participant Cloud Agent
Participant DAS
Participant ARD


opt User sets up Delegatee List
User->User DAA: Set up Delegatees List
User->User HomeDAP: Notify the Delegatees of nomination
User HomeDAP->User HomeDAP: Resolve HomeDAP from DA
User HomeDAP->ARD: Lookup HomeDAP for each Delegatee
ARD-->Delegatee HomeDAP: Route to each HomeDAP
Delegatee HomeDAP->Delegatee HomeDAP: Lookup DAP_USER_ID and Device Information
Delegatee HomeDAP->Delegatee DAA: Push Notification to Device
Delegated User->Delegatee DAA: View and Accept/Reject
Delegatee DAA->Delegatee HomeDAP: Accept/Reject status
Delegatee HomeDAP->User HomeDAP: Accept/Reject Status of each Delegatee
end

opt Delegated DA Recovery (Single User - Trusted Peer mode)
User->Delegated User: I need to recover my access
Delegated User->User DAA: Generate QR for User DA
User->User DAA: Scan QR from Delegatee DAA
User ->User HomeDAP: Resolve Delegated User
User HomeDAP->ARD: Lookup HomeDAP for Delegatee
ARD-->Delegatee HomeDAP: Route to HomeDAP
Delegatee HomeDAP->Delegatee HomeDAP: Lookup DAP_USER_ID and Device Information
Delegatee HomeDAP->Delegatee DAA: Push Notification to Device
Delegated User->Delegatee DAA: View and Accept/Reject with FIDO
Delegatee DAA->Delegatee HomeDAP: Accept/Reject Status
Delegatee HomeDAP->User HomeDAP: Delegatee accept/Reject Status
User HomeDAP->User DAA: Success/Failure
User HomeDAP->User DAA: Sync Credential Metadata
User DAA->User: Recovery Complete
end
