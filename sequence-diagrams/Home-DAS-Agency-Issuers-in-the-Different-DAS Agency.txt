title: Home DAP Agency - Issuers in the Different DAP Agency

participant User
participant DA Issuer
participant DAP_1
participant DLT_1
participant DAP_2
participant DLT_2
participant Credential Issuer
participant VC Store

User->DA Issuer: Flow 1:Request a DA
DA Issuer->DAP_1: TA,DA Collision checks
DAP_1->DA Issuer: Success - Create DA + @DAP_ID suffix
DAP_1-->DLT_1: Save DA Metadata (DA,USER_DAP_ID,ISSUER_ID, DAP_AGENCY_ID)
DAP_1-->DAP_1: User Home DAP Established (DAP_1)
DAP_1->DA Issuer: DA Success
DA Issuer->User: Send DA (QR, Email, etc)
User->Credential Issuer: Flow 2: Request VC
Credential Issuer-> User: TA Collision + Link DA
Credential Issuer->DAP_2: Resolve HOME_DAP_ID from DA
DAP_2->DLT_2: Lookup DAP Suffix in DA
DLT_2->DAP_2: Resolved DAP_AGENCY_ID, DAP_DA
DAP_2->Credential Issuer: Resolved HOME_DAP_ID, DAP_DA
Credential Issuer->VC Store: Issue Credential
Credential Issuer-->DAP_2: Save Credential Metadata (DA, USER_DAP_ID, ISSUER_ID)
DAP_2-->DAP_1: Forward VC Metadata to Home DAP
DAP_1--> DLT_1: Save VC Metadata (DA,USER_DAP_ID, ISSUER_ID, DAP_AGENCY_ID)
DAP_1-->DAP_2: VC Save Success
DAP_2->User: VC Notification
